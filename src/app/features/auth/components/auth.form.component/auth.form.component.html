@if (hasError()) {
<div class="form-error-message">
  <p-message severity="error">{{ errorMessage() }}</p-message>
</div>
}
<form [formGroup]="loginForm" (ngSubmit)="login()">
  <div class="form-fields-group">
    <div class="form-input-wrapper">
      <p-floatlabel variant="on">
        <input
          pInputText
          id="orgCode"
          formControlName="orgCode"
          placeholder="Código de empresa"
          name="orgCode"
          pSize="large"
          required
          fluid="true"
          [invalid]="loginForm.get('orgCode')?.errors?.['required'] && loginForm.get('orgCode')?.touched"
        />
        <label for="orgCode">Código de empresa</label>
      </p-floatlabel>
      @if (loginForm.get('orgCode')?.errors?.['required'] &&
      loginForm.get('orgCode')?.touched) {
      <p-message severity="error" variant="simple" size="small"
        >El código de empresa es requerido</p-message
      >
      }
    </div>

    <div class="form-input-wrapper">
      <p-floatlabel variant="on">
        <input
          pInputText
          type="text"
          id="username"
          formControlName="username"
          placeholder="Nombre de usuario"
          name="username"
          pSize="large"
          fluid="true"
          required
          [invalid]="loginForm.get('username')?.errors?.['required'] && loginForm.get('username')?.touched"
        />
        <label for="username">Nombre de usuario</label>
      </p-floatlabel>
      @if (loginForm.get('username')?.errors?.['required'] &&
      loginForm.get('username')?.touched) {
      <p-message severity="error" variant="simple" size="small"
        >El nombre de usuario es requerido</p-message
      >
      }
    </div>
    <div class="form-input-wrapper">
      <p-floatlabel variant="on">
        <p-password
          size="large"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Contraseña"
          class="layout-full-width"
          fluid="true"
          id="password"
          formControlName="password"
          name="password"
          required
          [invalid]="loginForm.get('password')?.errors?.['required'] && loginForm.get('password')?.touched"
        />
        <label for="password">Contraseña</label>
      </p-floatlabel>

      @if (loginForm.get('password')?.errors?.['required'] &&
      loginForm.get('password')?.touched) {
      <p-message severity="error" variant="simple" size="small"
        >La contraseña es requerida</p-message
      >
      }
    </div>

    <div class="link-action-container">
      <p-confirmdialog draggable="false" defaultFocus="none" />
      <a class="link-action" (click)="showModal($event)"
        >¿Olvidaste tu contraseña?</a
      >
    </div>
    <p-button
      label="Iniciar sesión"
      size="large"
      fluid="true"
      severity="contrast"
      styleClass="button-primary-custom"
      type="submit"
      [loading]="isLoading()"
    />
  </div>
</form>
<div class="spacing-top-sm">
  <p-button
    label="Iniciar sesión como administrador"
    severity="contrast"
    size="large"
    fluid="true"
    variant="text"
    (click)="router.navigate(['/login-root'])"
  />
</div>
