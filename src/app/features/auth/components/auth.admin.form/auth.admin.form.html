@if (hasError()) {
<div class="form-error-message">
  <p-message severity="error">{{ errorMessage() }}</p-message>
</div>
}
<form [formGroup]="loginForm" (ngSubmit)="login()">
  <div class="form-fields-group">
    <div class="form-input-wrapper">
      <p-floatlabel variant="on">
        <input
          pInputText
          type="email"
          id="email"
          formControlName="username"
          placeholder="Correo electrónico"
          name="username"
          pSize="large"
          required
          fluid="true"
          [invalid]="(loginForm.get('username')?.errors?.['required'] || loginForm.get('username')?.errors?.['username']) && loginForm.get('username')?.touched"
        />
        <label for="username">Correo electrónico</label>
      </p-floatlabel>
      @if (loginForm.get('username')?.errors?.['required'] && loginForm.get('username')?.touched) {
        <p-message severity="error" variant="simple" size="small">El correo electrónico es requerido</p-message>
      } @else if (loginForm.get('username')?.errors?.['username'] && loginForm.get('username')?.touched) {
        <p-message severity="error" variant="simple" size="small">Ingresa un correo electrónico válido</p-message>
      }
    </div>

    <div class="form-input-wrapper">
      <p-floatlabel variant="on">
        <p-password
          size="large"
          [toggleMask]="true"
          [feedback]="false"
          placeholder="Contraseña"
          class="layout-full-width"
          fluid="true"
          id="password"
          formControlName="password"
          name="password"
          required
          [invalid]="loginForm.get('password')?.errors?.['required'] && loginForm.get('password')?.touched"
        />
        <label for="password">Contraseña</label>
      </p-floatlabel>
      @if (loginForm.get('password')?.errors?.['required'] && loginForm.get('password')?.touched) {
        <p-message severity="error" variant="simple" size="small">La contraseña es requerida</p-message>
      }
    </div>

    <div class="link-action-container">
      <p-confirmdialog draggable="false" defaultFocus="none" />
      <a class="link-action" (click)="showForgotPasswordModal($event)">¿Olvidaste tu contraseña?</a>
    </div>

    <p-button
      label="Iniciar sesión"
      size="large"
      fluid="true"
      severity="contrast"
      styleClass="button-primary-custom"
      type="submit"
      [loading]="isLoading()"
    />
  </div>
</form>

<div class="spacing-top-sm">
  <p-button
    label="Iniciar sesión como usuario"
    severity="contrast"
    size="large"
    fluid="true"
    variant="text"
    (click)="router.navigate(['/login'])"
  />
</div>
