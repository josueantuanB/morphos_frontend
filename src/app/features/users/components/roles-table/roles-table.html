<div class="roles-table-container">
  <!-- Toolbar -->
  <div class="roles-table__toolbar">
    <div class="roles-table__search-section">
      <span class="roles-table__search-wrapper">
        <i class="roles-table__search-icon"></i>
        <input type="text" pInputText placeholder="Buscar rol..." class="roles-table__search-input"
          [(ngModel)]="searchQuery" (ngModelChange)="searchQuery.set($event)" (keyup)="onSearchChange()" />
      </span>
    </div>

  </div>

  <!-- Table -->
  <div class="roles-table__wrapper">
    <table class="roles-table">
      <thead class="roles-table__head">
        <tr>
          <th class="roles-table__cell">Nombre del Rol</th>
          <th class="roles-table__cell">Descripci√≥n</th>
          <th class="roles-table__cell">Usuarios Activos</th>
          <th class="roles-table__cell roles-table__cell--actions">Acciones</th>
        </tr>
      </thead>
      <tbody class="roles-table__body">
        @if (isLoading()) {
        @for (i of [1,2,3,4,5]; track i) {
        <tr class="roles-table__row">
          <td class="roles-table__cell"><p-skeleton width="10rem" height="1.5rem"></p-skeleton></td>
          <td class="roles-table__cell"><p-skeleton width="15rem" height="1.5rem"></p-skeleton></td>
          <td class="roles-table__cell"><p-skeleton width="3rem" height="1.5rem"></p-skeleton></td>
          <td class="roles-table__cell"><p-skeleton width="2rem" height="1.5rem"></p-skeleton></td>
        </tr>
        }
        } @else {
        @for (role of roles(); track role.rolId) {
        <tr class="roles-table__row">
          <td class="roles-table__cell roles-table__cell--name">{{ role.rolName }}</td>
          <td class="roles-table__cell">{{ role.rolDescription }}</td>
          <td class="roles-table__cell">{{ role.rolUserCount }}</td>
          <td class="roles-table__cell roles-table__cell--actions">
            <p-button [text]="true" severity="secondary" size="small"
              (click)="setSelectedRole(role); menu.toggle($event)">
              <img src="/icons/points_menu.svg" alt="Opciones" class="action-icon" />
            </p-button>
          </td>
        </tr>
        } @empty {
        <tr>
          <td colspan="4" class="roles-table__empty">
            No se encontraron roles
          </td>
        </tr>
        }
        }
      </tbody>
    </table>
  </div>

  <p-menu #menu [model]="items" [popup]="true" appendTo="body"></p-menu>
</div>